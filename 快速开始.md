# 快速开始指南

## 前置条件

### 1. 环境要求
- JDK 1.8+
- Maven 3.6+
- MySQL 5.7+
- Redis 5.0+
- Nacos 2.0+

### 2. 下载并启动基础设施

#### Nacos
```bash
# 下载Nacos
wget https://github.com/alibaba/nacos/releases/download/2.2.0/nacos-server-2.2.0.tar.gz
tar -xzf nacos-server-2.2.0.tar.gz
cd nacos/bin

# 启动Nacos（单机模式）
sh startup.sh -m standalone

# 访问 http://localhost:8848/nacos
# 默认账号/密码: nacos/nacos
```

#### Redis
```bash
# 使用Docker启动
docker run -d -p 6379:6379 redis:5.0

# 或使用本地安装的Redis
redis-server
```

#### MySQL
```bash
# 确保MySQL已启动
# 创建数据库和表
mysql -u root -p < sql/init.sql
```

## 启动步骤

### 方式一：使用启动脚本（推荐）

```bash
# 1. 给脚本添加执行权限（Linux/Mac）
chmod +x start.sh stop.sh

# 2. 启动所有服务
./start.sh

# 3. 停止所有服务
./stop.sh
```

### 方式二：手动启动

```bash
# 1. 编译项目
mvn clean install -DskipTests

# 2. 启动网关服务
cd gateway
mvn spring-boot:run

# 3. 启动认证服务（新终端）
cd auth-service
mvn spring-boot:run

# 4. 启动用户服务（新终端）
cd user-service
mvn spring-boot:run

# 5. 启动订单服务（新终端）
cd order-service
mvn spring-boot:run

# 6. 启动秒杀服务（新终端）
cd seckill-service
mvn spring-boot:run
```

## 验证服务

### 1. 检查服务注册
访问 Nacos 控制台：http://localhost:8848/nacos
- 查看"服务管理" -> "服务列表"
- 应该能看到所有已注册的服务

### 2. 测试API

#### 测试登录
```bash
curl -X POST http://localhost:8080/api/auth/login/username \
  -H "Content-Type: application/json" \
  -d '{
    "username": "admin",
    "password": "123456"
  }'
```

预期响应：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "token": "eyJhbGciOiJIUzUxMiJ9...",
    "userId": 1,
    "username": "admin"
  }
}
```

#### 测试秒杀
```bash
# 1. 初始化库存
curl -X POST "http://localhost:8080/api/seckill/init/1?stock=100"

# 2. 秒杀下单
curl -X POST "http://localhost:8080/api/seckill/1?userId=1"
```

## 常见问题

### 1. 服务启动失败
- **检查端口占用**: 确保8080-8084端口未被占用
- **检查Nacos连接**: 确保Nacos已启动并可访问
- **检查数据库连接**: 确保MySQL已启动且数据库已创建

### 2. 注册中心连接失败
- 检查Nacos是否启动: `curl http://localhost:8848/nacos`
- 检查配置文件中的Nacos地址是否正确

### 3. Redis连接失败
- 检查Redis是否启动: `redis-cli ping`
- 应该返回 `PONG`

### 4. 数据库连接失败
- 检查MySQL是否启动
- 检查数据库是否已创建: `mysql -u root -p -e "SHOW DATABASES;"`
- 检查用户名密码是否正确

### 5. 编译错误
- 确保JDK版本为1.8+
- 确保Maven版本为3.6+
- 清理并重新编译: `mvn clean install`

## 开发建议

### 1. IDE配置
- 推荐使用 IntelliJ IDEA
- 安装 Lombok 插件
- 配置 Maven 设置

### 2. 代码规范
- 遵循 DDD 分层架构
- 使用统一的异常处理
- 使用统一的响应格式

### 3. 测试
- 单元测试: `mvn test`
- 集成测试: 启动服务后使用Postman或curl测试

## 下一步

1. 阅读 [README.md](README.md) 了解项目详情
2. 阅读 [项目架构说明.md](项目架构说明.md) 了解架构设计
3. 阅读 [API测试文档.md](API测试文档.md) 了解API使用
4. 根据业务需求扩展功能

## 技术支持

如有问题，请查看：
- 项目文档
- 日志文件: `./logs/`
- Nacos配置中心

